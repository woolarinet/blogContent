---
title: '[Node.js 교과서] 01.Node.js 개념과 특징'
category: 'Node.js'
desc: 'Node란 무엇인지 근본적인 부분부터 알아가기'
date: '2021-07-28'
thumb: 'node'
---

# Node.js란?
- 노드 공식 사이트에서는 노드를 다음과 같이 설명하고 있다.
    - #### *Node.js는 Chrome V8 Javascript 엔진으로 빌드된 Javascript 런타임입니다.*
#### 그렇다면 여기서 Javascript 런타임은 무엇일까..

### Javascript 런타임
- **런타임**이란, 특정언어로 만든 프로그램들을 실행할 수 있는 환경을 뜻한다.
    - 즉, 노드는 *자바스크립트 프로그램을 실행할 수 있는 환경* 이라고 이해할 수 있을 것 같다.
## 노드의 구조 및 특성
![node-structure.png](https://raw.githubusercontent.com/woolarinet/blog_content/main/images/Node.js/ch1/1.png)
- 노드는 V8과 더불어 libuv라는 라이브러리를 사용한다. 이 둘은 C와 C++로 구현되어 있다.
- libuv 라이브러리는 이벤트 기반, 논 블로킹 I/O 모델을 구현한다.

### 이벤트 기반
- 이벤트 기반이란, 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식을 의미한다. (*이벤트로는 클릭, 네트워크 요청 등이 있다.* )
- 이 부분은 [여기](https://www.youtube.com/watch?v=8aGhZQkoFbQ)의 개발자 분의 발표를 보면 아주 이해하기 쉬울거라 생각한다. 나도 이 영상을 계속 반복하며 보면서 그림을 그리며 이해를 했다.
### 논 블로킹 I/O
- I/O는 Input/Output으로서 파일 시스템 접근이나 네트워크를 통한 요청 같은 작업을 뜻한다.
- 노드는 여기서 이전 작업이 완료될 때까지 대기하지 않고 다음 작업을 수행하는데 이를 **논 블로킹** 이라 한다.
- 작업1, 2, 3을 처리한다 할 때, 블로킹 방식 보다 논 블로킹 방식이 더 짧은 시간에 처리가 가능하다.
  - 하지만 작업들이 모두 동시에 처리될 수 있는 작업이라는 전제가 있다.
- 노드는 I/O 작업을 백그라운드로 넘겨 동시에 처리하곤 한다.
- 따라서 동시에 처리될 수 있는 작업들은 최대한 묶어서 백그라운드로 넘겨야 시간을 절약할 수 있다.
  - *setTimeout(콜백, 0)* 은 코드를 논 블로킹으로 만들기 위해 사용하는 기법 중 하나다.
### 싱글 스레드
- 운영체제에서 할당하는 작업의 단위인 **프로세스** '내'에서 실행되는 흐름의 단위를 **스레드**라 한다. 프로세스는 스레드를 여러 개 생성해 여러 작업을 동시에 처리할 수 있다. 스레드들은 부모 프로세스의 자원을 공유한다. 같은 주소의 메모리에 접근 가능하므로 데이터를 공유할 수 있다. 
- 노드가 싱글 스레드라고 알려져 있지만, 엄밀히 말하면 싱글 스레드로 동작하지 않는다.
  - 노드를 실행하면 먼저 프로세스가 하나 생성되고, 프로세스에서 스레드'들'을 생성하는데, 우리가 직접 제어할 수 있는 스레드가 하나일 뿐이다.
  - 하나의 스레드만 직접 조작할 수 있으므로 요청이 많이 들어오면 한번에 하나씩 요청을 처리한다.

## 서버로서의 노드
- 서버에는 기본적으로 I/O 요청이 많이 발생하므로, I/O 처리를 잘하는 노드를 서버로 사용하면 좋다.
- 하지만 노드는 CPU 부하가 큰 작업에는 적합하지 않다. 코드가 CPU연산을 많이 요구하면 스레드 하나가 혼자서 감당하기 어렵다.
- 따라서 노드는 개수는 많지만 크기는 작은 데이터를 실시간으로 주고받는 데 적합하다.
  - ex) 실시간 채팅, 주식 차트 등
- 웹 브라우저와 같은 언어(JavaScript)를 사용하기에 생산성이 매우 좋다.
- 하지만 Go와 같이 비동기에 강점을 보이는 언어나 nginx처럼 정적파일 제공, 로드 밸런싱에 특화된 웹 서버에 비해서는 속도가 느리다.
  - 하지만 극단적인 성능이 필요한 경우가 아니라면 이러한 단점들은 노드의 생산성으로 어느 정도 극복 가능하다.
- 또한 JSON을 이용하여 데이터를 주고받는 요즈음엔, JSON이 자바스크립트 형식이므로 노드에서 쉽게 처리할 수 있다.

### 서버 외의 노드
- 노드는 자바스크립트 런타임이므로 용도가 서버에만 한정되지 않는다.
- 노드 기반으로 돌아가는 대표적인 웹 프레임워크로는 앵귤러, 리액트, 뷰 등이 있으며 모바일 개발 도구로는 리액트 네이티브를 많이 사용한다. 데스크톱 개발 도구로는 일렉트론이 대표적!

## 내가 만든 쇼핑몰은 노드가 적합할까?
- 보통 쇼핑몰은 기본적인 틀이 있고, 그 안의 내용물만 조금씩 달라진다. 노드가 다른 서버에 비해 이러한 콘텐츠를 제공하는 데 뚜렷한 장점을 가지지는 않지만 적합하지 않다는 것도 아니다.
- 사실 처음 쇼핑몰을 개발하기 전 기술스택을 고려했을 때, 나는 제로베이스였고 최대한 적고 깊게 공부할 수 있는 방법을 택해야 했다.
  - 그래서 프론트와 같은 언어로 작업할 수 있는 노드를 선택했었는데, CPU작업 보다는 I/O작업(데이터베이스)이 많으므로 사실 크게 문제가 될거라는 생각은 없었다. (*그리고 아직까지 큰 에러사항은 없지만.. 아직 맘을 놓진 못하고 있다.* ) 어서 빨리 실력을 키워서 더 안정적이게 리팩토링을 하려한다.