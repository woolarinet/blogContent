---
title: '데이터모델링의 이해'
category: 'Database'
desc: '데이터 모델링 기본 개념의 이해'
date: '2021-08-14'
thumb: 'database'
keyword: 'database', 'modeling', 'oracle', 'mysql', 'SQL'
---

# 모델링
- 모델이라고 하는 것은 모형의 의미로서, 살아가면서 나타날 수 있는 다양한 현상에 대해 일정한 표기법에 의해 표현해 놓은 모형이라 할 수 있다.
- 이 다양한 현상들은 사람, 사물, 개념 등에 의해 발생된다고 할 수 있고, 모델링은 이것을 표기법에 의해 규칙을 가지고 표기하는 것 자체를 의미.
- *즉 모델을 만들어가는 일 자체를 모델링으로 정의할 수 있다. (추상화된 반영)*

## 모델링 세가지 관점
- 데이터 관점
  - 어떤 데이터와 관련이 있는지, 데이터간의 관계는 무엇인지에 대해 모델링
- 프로세스 관점
  - 업무가 실제 하고 있는 일이 무엇인지 혹은 무엇을 해야 하는지 모델링
- 데이터와 프로세스의 상관관점
  - 업무가 처리하는 일의 방법에 따라 데이터는 어떻게 영향을 받고 있는지 모델링

## 그래서 데이터 모델링이란?
- 정보시스템을 구축하기 위해, 해당 업무에 어떤 데이터가 존재하는지 혹은 업무가 필요로 하는 정보는 무엇인지를 분석하는 방법
- 업무에 대한 종합적인 이해를 바탕으로 데이터를 분석하고 설계하여 정보시스템을 구축하는 과정
- 즉, 한마디로 **"데이터베이스를 구축하기 위한 분석/설계의 과정"** 이라 말할 수 있을 것 같다.

## 데이터 모델링의 중요성
### 파급효과
- 시스템을 구축하기 위해 많은 단위 테스트들이 수행된다. 완료 후에는 전체를 묶어서 기능테스트 및 통합테스트를 수행하게 된다.
- 이 과정에서 데이터 모델의 변경이 불가피한 상황이 발생하면, 변경에 의해 전체 시스템에 큰 영향을 끼칠 수 있다.
- 이러한 이유에 의해 다른 어떤 설계과정보다 데이터 설계가 더 중요하다고 볼 수 있다고 한다.
### 복잡한 정보 요구사항의 간결한 표현
- 데이터 모델은 건축물로 비유하면 설계 도면에 해당한다. 시스템을 구축하는 많은 관계자들이 설계자의 생각대로 정보요구사항을 이해하고 이를 운용할 수 있는 애플리케이션을 개발하고 데이터 정합성 (데이터 값의 일치함)을 유지할 수 있도록 하는 것이다.
- 즉, 정보요구사항을 가장 명확하고 간결하게 표현할 수 있는 도구이다. 요구사항을 파악 시에 수많은 페이지의 기능적인 요구사항을 파악하는 거보다 간결하게 그려져 있는 데이터 모델을 보며 파악하는 것이 훨씬 빠르다.

### 데이터 품질
- 데이터베이스에 담겨 있는 데이터는 기업의 중요한 자산이다. 기간이 지남에 따라 그 활용가치는 훨씬 높아진다.
- 따라서 데이터 모델링을 할 때 데이터들의 가치를 점점 높이고 지키기 위해 유의해야할 사항들이 있다.
  - 중복 데이터 모델을 정의하여 여러장소에 같은 정보를 저장하지 않게끔 한다. (중복)
  - 데이터의 정의를 데이터의 사용프로세스와 분리함으로써 데이터나 프로세스의 작은 변화가 전체 시스템이나 데이터베이스에 치명적인 변화를 일으킬 가능성을 줄여줄 수 있도록 한다. (비유연성)
  - 데이터간의 상호 연관 관계를 명확하게 정의함으로서 데이터간의 비일관성을 예방할 수 있도록 한다.

  &nbsp;
## 데이터 모델링 과정
1. 개념적 데이터 모델링
    - 사용자의 데이터 요구사항을 찾고 분석하는데서 시작한다.
    - 핵심 엔터티와 그들 간의 관계를 발견하고 엔터티-관계 다이어그램을 생성한다.
    - 추상적이기에 구조화를 쉽게하고, 사용자 및 개발자가 시스템 기능에 대하여 논의할 수 있는 기반을 형성한다.
    - 어떤 자료가 중요하며 어떤 자료가 유지되어야 하는지를 결정한다.
2. 논리적 데이터 모델링
    - 논리적 구조와 규칙을 명확하게 표현하는 과정이다.
    - 가장 핵심이 되는 과정이며 대표적인 정규화, 다 대 다 관계해소, 참조 무결성 규칙 정의 등이 이루어지는 과정이다.
3. 물리적 데이터 모델링
    - 논리 데이터 모델이 어떻게 하드웨어에 표현될 것인지를 다룬다.
    - 물리적 스키마(데이터가 어떻게 컴퓨터에 물리적으로 저장될 것인가)를 정의한다.
    - 테이블, 컬럼 등과 접근 방법을 정의하며 관리자가 설계하고 구현하기 위해 보다 많은 시간을 투자하여야 한다.

  &nbsp;
## 데이터 모델링의 세가지 요소
- 데이터 모델링을 구성하는 중요한 세가지 개념이 존재한다.
  - 업무가 관여하는 **어떤 것** (Things), **어떤 것이 가지는 성격** (Attributes), **업무가 관여하는 어떤것** (Relationships)간의 관계
  - 사물이나 사건 등을 Things, Things가 가지는 세부사항을 Attributes, Things간의 연관성을 Relationship이라고 표현한다.
- 그리고 이들을 엔터티, 속성, 관계로 표현한다.
- |개념|복수개념|단수개념|
  |---|----|-------|
  |어떤 것|Entity Type|Entity|
  |연관|Relationship|Instance|
  |성격|Attributes|Attribute Value|

  - 실무에서는 단수, 복수 구분없이 관계라고 표현하는 경우가 많으며 엔터티 또한 단수, 복수 모두 표현하는 경우가 많다고 한다. 엔터티를 집합개념으로 사용하는 경우에서는 인스턴스를 단수개념으로 사용한다고 한다.

## 데이터 독립성
- 데이터독립성은 지속적으로 증가하는 유지보수 비용을 줄여주고, 데이터 복잡도를 낮추며 중복된 데이터를 줄이기 위한 목적이 있다.
- 또한 끊임없이 요구되는 사용자 요구사항에 대해 화면과 데이터베이스 간에 서로 독립성을 유지하기 위한 목적으로 데이터 독립성 개념이 출현했다고 할 수 있다.
- 컴포넌트 기반의 모듈 구성의 가장 큰 목적은 상호간 영향에서 벗어나 개별 형식이 가지는 고유기능을 유지시키며 그 기능을 극대화하는 것이라 하는데 이와 같은 맥락이라고 볼 수 있을 것 같다.

### 데이터독립성 요소
- 외부스키마
  - 각 사용자가 보는 개인적 DB 스키마 (View 단계)
  - 접근하는 특성에 따른 스키마를 구성한다. (사용자 관점)
- 개념스키마
  - DB에 저장되는 데이터와 그들간의 관계를 표현하는 스키마
  - 모든 사용자 관점을 통합한 조직 전체의 DB (통합 관점)
- 내부스키마
  - 물리적 장치에서 데이터가 실제적으로 저장되는 방법을 표현하는 스키마
  - DB가 물리적으로 저장된 형식이다. (물리적 저장구조)
##### 각각 상호 독립적인 의미를 가지고 고유기능을 가진다. 데이터 모델링은 통합관점의 뷰를 가지고 있는 개념스키마를 만들어가는 과정으로 이해할 수 있다고 한다.

### 데이터독립성 영역
- 논리적 독립성
  - 개념스키마가 변경되어도 외부스키마에는 영향을 미치지 않게 지원
  - 논리적 구조가 변경되어도 응용프로그램에 영향 X
  - 사용자 특성에 맞게 변경이 가능하며 통합 구조 변경이 가능하다.
- 물리적 독립성
  - 내부스키마가 변경되어도 외부/개념스키마는 영향받지 않게 지원
  - 지원장치의 구조변경은 응용프로그램 및 개념스키마에 영향 X
  - 물리적 구조 영향 없이, 개념구조 영향없이 개념구조 및 물리적 구조가 서로 변경 가능하다.

### 데이터독립성 매핑
- 외부/개념적 매핑 (논리적 매핑)
  - 외부적 뷰와 개념적 뷰의 상호관련성 정의
  - ex) 접근 형식에 따라 다른 타입의 필드를 가질 수 있음 -> 개념적 뷰의 필드 타입은 변화 X
- 개념/내부적 매핑 (물리적 매핑)
  - 개념적 뷰와 저장된 데이터베이스의 상호관련성 정의
  - ex) 데이터베이스의 구조가 바뀌면 물리적 매핑이 바뀌어야함 -> 개념적 스키마의 유지를 위해

## 데이터 모델 표기법 (ERD)의 이해
- 1976년 Peter Chen이 Entity-relationship model (E-R Model)이라는 표기법을 만들었다. 이 표기법은 데이터 모델링에 대한 이론을 배울 때 많이 활용되고 있다.
- ![erd.png](https://raw.githubusercontent.com/woolarinet/blog_content/main/images/Database/modeling/1.png)
- ERD는 어떻게 그리든 업무에는 전혀 지장을 주지 않지만 일정 규칙을 지정하여 그림으로써 데이터 모델을 누구나 공통된 시각으로 파악할 수 있고 의사소통을 원할하게 하는 장점이 있다.
### 작업 순서
![erd.png](https://raw.githubusercontent.com/woolarinet/blog_content/main/images/Database/modeling/2.png)
1. 엔터티를 그린다.
    - 사각형으로 표기하여 기술한다.
2. 엔터티를 적절히 배치한다.
    - ![erd.png](https://raw.githubusercontent.com/woolarinet/blog_content/main/images/Database/modeling/3.png)
    - 어디에 배치하는 지는 중요한 문제이다. 사람의 눈은 왼쪽에서 오른쪽, 위에서 아래로 이동하는 경향이 있기에 가장 중요한 엔터티를 왼쪽상단에 배치하고 이것을 중심으로 다른 엔터티를 나열하면서 전개함으로써 이에 사람의 눈이 따라가기에 편리한 데이터 모델링을 전개할 수 있다.
    - 가장 중요한 엔터티는 왼쪽상단에서 살짝 아래 중앙에 배치하면 전체 엔터티와 어울리게 되어 향후 관계를 연결할 때 선이 꼬이지 않고 효과적으로 배치할 수 있다.
3. 엔터티간 관계를 설정한다.
    - ![erd.png](https://raw.githubusercontent.com/woolarinet/blog_content/main/images/Database/modeling/4.png)
    - 초기에 Primary Key로 속성이 상속되는 식별자 관계를 설정한다.
    - 중복된 간계가 발생하지 않고 순환되는 관계도 발생하지 않도록 유의하여 작성한다.
4. 관계명을 기술한다.
    - ![erd.png](https://raw.githubusercontent.com/woolarinet/blog_content/main/images/Database/modeling/5.png)
    - 연결된 관계에 이름을 부여한다.
    - 현재형을 사용하며 지나치게 포괄적인 용어는 사용하지 않도록 한다.
5. 관계의 참여도를 기술하고 필수여부를 기술한다.
    - ![erd.png](https://raw.githubusercontent.com/woolarinet/blog_content/main/images/Database/modeling/6.png)
    - 관계가 참여하는 애트리뷰트 중 엔터티내에 인스턴스들이 얼마나 관계에 참여하는지, 관계차수(Cardinality)를 표현한다.
    - IE표기법은 실선, Barker표기법은 실선, 점선을 혼합하여 표기한다.
    - 다수참여는 까마귀 발과 같은 모양으로 그려주며 관계의 필수/선택은 관계선에 원을 표현하여 그린다.

## 좋은 데이터 모델의 요소
- 실무에서 특정 데이터 모델이 요구사항을 얼마나 시스템적으로 잘 구현할 수 있는가를 객관적으로 평가할 기준이 아직 존재하지 않는다. 이러한 상황에서 대체적으로 좋은 데이터 모델이라고 말할 수 있는 몇가지 요소가 존재한다.
  - 완전성
    - 업무에서 필요로 하는 모든 데이터가 데이터 모델에 정의되어 있어야 한다. 이 기준이 충족되지 못하면 다른 어떤 평가 기준도 의미가 사라진다.
  - 중복 배제
    - 하나의 데이터베이스 내에 동일한 사실은 반드시 한번만 기록하여야 한다.
    - 데이터의 중복 관리로 인해 저장공간, 데이터의 일관성 유지를 위한 추가 데이터 조작 등의 낭비비용을 줄일 수 있다.
  - 업무 규칙
    - 데이터 모델링 과정에서 도출되는 수많은 업무 규칙 (비지니스 룰)을 데이터 모델에 표현하고 이를 해당 모델을 활용하는 모든 사용자가 공유할 수 있도록 제공하는 것은 매우 중요한 요소 중 하나이다.
    - 이렇게 함으로 사용자는 해당 규칙에 대해 동일한 판단을 하고 데이터를 조작할 수 있다.
  - 데이터 재사용
    - 합리적으로 잘 정돈된 데이터를 통합하여 데이터의 집합을 정의하고 이를 데이터 모델로 잘 표현하여 활용하면 웬만한 업무 변화에도 데이터 모델이 영향을 받지 않고 운용할 수 있게 된다.
  - 의사소통
    - 데이터 분석 과정에서는 자연스럽게 도출되는 많은 업무 규칙들은 데이터 모델에 엔터티, 서브타입, 속성, 관계 등의 형태로 자세하게 표현되어야 한다.
    - 이렇게 표현된 많은 업무규칙들은 사용자들이 설계자가 정의한 업무규칙들을 동일한 의미로 받아들여 정보시스템을 활용할 수 있게 하는 역할을 한다.
  - 통합성
    - 가장 바람직한 데이터 구조의 형태는 동일한 데이터는 조직 전체에서 한번만 정의되고 여러 다른 영역에서 참조, 활용하는 것이다.
    - 이를 위해 공유 데이터에 대한 구조를 여러 업무 영역에서 공동으로 사용하기 용이하게 정의할 수 있어야 한다. 이러한 이유로 데이터 아키텍처의 중요성이 한 층 부각되고 있다고 한다.

## 마치며
#### 실제로 실무를 경험하면서, 백엔드 개발자로서 데이터 모델을 효율적으로 설계하고 데이터베이스를 구축한 후, 데이터를 효율적으로 관리하며 사용하는 중요성을 매일 깨닫는 중이다. 사실 대부분이라고 느끼는 것도 있다. 실제로 쇼핑몰을 개발했을 당시에도, ERD를 그리는 것에만 한달이 넘게 소요됐었다. 그만큼 너무 중요하고 개발에 있어 제일 심혈을 기울여야 하는 부분 중 하나라고 생각한다. 내가 읽고 정리하는 SQL개발자기본서에 따르면 Bachmann은 "프로그래머는 데이터집합의 탐색자"라고 한다. 이에 동의하는 바이다. 데이터베이스의 설계에 따라 미치는 영향력은 어마어마하기 때문에.... 데이터 모델링에 대해 깊게 학습하고 상당한 이해를 갖는 것이 훌륭한 개발자의 조건 중 하나라고 생각하게 되는 시간이었다.

## Reference
- SQL 개발자 기본서