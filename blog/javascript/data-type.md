---
title: '[코어 자바스크립트] 01.데이터 타입'
category: 'javascript'
desc: '[코어 자바스크립트] 데이터 타입 요약 정리'
date: '2021-07-14'
thumb: 'js'
---

# 배경지식
- 과거보다 메모리 용량이 월등히 커진 상황에서 자바스크립트는 메모리 관리에 대한 압박에서 자유로워짐
  - 따라서 숫자의 경우 정수형, 부동소수형을 구부하지 않고 8바이트를 확보 -> 개발자가 형변환을 걱정해야 하는 상황이 덜 발생하게 되었다.
  
## 변수 선언과 데이터 할당
``` javascript
 var a;
 a = 'abc';

 var a = 'abc';
```
  - 데이터를 저장하기 위한 별도의 메모리 공간을 확보하여 문자열 'abc'를 저장 -> 그 주소를 변수 영역에 저장하는 과정으로 이루어져있다. *(*데이터 변환을 자유롭게 할 수 있게 함과 메모리를 더욱 효율적으로 관리하기 위함* )*
    - *문자열* 은 특별하게 정해진 규격이 없기 때문에 필요한 메모리 용량이 가변적.
    - 따라서 'abc'의 마지막에 'def'를 추가할 경우, 'abcdef'라는 문자열을 새로 만들어 별도의 공간에 저장하고 그 주소를 변수 공간에 연결.
    - *숫자* 의 경우에도 500개의 변수에 5를 할당하는 상황 속에서, 데이터 공간에 5를 한번 저장 후 해당 주소만 변수 공간들에 연결한다면 메모리 관리를 효율적으로 할 수 있다.
    - **이처럼 변수 영역과 데이터 영역을 분리하면 중복된 데이터에 대한 처리 효율이 높아짐**  

# 데이터 타입의 종류
- **기본형**(primitive type)과 **참조형**(reference type)
  - **기본형**에는 *number, string, boolean, null, undefined* 등이 있으며 **ES6**에서 *symbol*이 추가.
  - **참조형**에는 *object*가 존재하며 *Array, Function, Date, 정규표현식(RegExp)* 및 **ES6**에서 추가된 *Map, WeakMap, Set, WeakSet*등이 객체의 하위 분류에 속함.
  - 일반적으로 할당 및 연산 시 복제가 되는 것과 참조가 되는 것으로 자료형의 기준을 나눈다고 알려짐.
  (이 부분은 C의 포인터 개념과 유사하다고 생각한다.)

  &nbsp;
## 기본형 데이터와 참조형 데이터
##### 불변값과 상수는 전혀 다른 개념이다.
  - 불변값
    - 변수와 상수는 **변수 영역** 메모리의 변경 가능 여부
    - 불변성 여부는 **데이터 영역** 메모리의 변경 가능 여부
    - 따라서 **기본형 데이터**는 모두 불변값!
  - 가변값
    - *기본형 데이터* 와 *참조형 데이터* 와의 차이는 ***객체의 변수 (프로퍼티)영역*** 이 별도로 존재.
  ``` javascript
  var obj1 = {
    a: 1004,
    b: 'hello~'
  };
  ```
  1. 이 경우, 별도의 프로퍼티 영역을 마련하고 각 프로퍼티에 데이터 영역의 1004, 'hello~'의 주소값을 저장한다. 
  2. 그리고 이 프로퍼티들의 주소범위를 새로운 데이터영역에 할당해주고 
  3. 이 주소값을 변수영역에서 obj1의 값에 할당해준다.
  - 여기서, 객체가 별도로 할애한 영역은 변수 영역일 뿐 데이터 영역은 기존의 메모리 공간을 그대로 활용.
    - 데이터 영역의 값은 모두 불변값이지만, 변수에는 다른 값을 얼마든지 대입할 수 있다.
    - 이 부분에 있어 **참조형 데이터**는 불변하지 않다라고 할 수 있다.
    - ***단, 참조형 데이터 자체를 변경할 경우가 아닌, 내부의 프로퍼티를 변경할 때만 성립한다.***

  &nbsp;
### *불변 객체를 만드는 방법*
*-> 전달받은 객체에 변경을 가하더라도, 원본 객체가 변하지 않아야 하는 경우*

- **얕은 복사**와 **깊은 복사**
  - *얕은 복사* 는 바로 아래 단계의 값만 복사
  - *깊은 복사* 는 내부의 모든 값들을 전부 복사
  - *즉, 얕은 복사는 프로퍼티에 대하여 원본과 사본이 모두 동일한 참조형 데이터 주소를 가리키게 된다.*

  &nbsp;
1. 깊은 복사를 수행하는 함수
``` javascript
var copyObjDeep = function(target) {
  var result = {};
  if (typeof target === 'object' && target !== null) {
    for (var prop in target) {
      result[prop] = copyObjDeeg(target[prop]);
    }
  } else result = target;
  return result;
}
```

  &nbsp;

2. JSON을 활용
``` javascript
var copyObjViaJSON = function(target) {
  return JSON.parse(JSON.stringify(target))
}
```

  &nbsp;
## undefined와 null
*두 값 모두 없음을 나타내지만 사용 목적과 의미에 다소 차이가 있다.*
- undefined
  - 값을 대입하지 않은 변수, *즉 데이터 영역의 메모리 주소를 지정하지 않은 식별자에 접근*
  - 객체 내부의 존재하지 않는 프로퍼티에 접근
  - return 문이 없거나 호출되지 않는 함수의 실행 결과
  - ***undefined를 직접 할당한 경우, 비어있음을 의미하긴 하지만 하나의 값으로 동작***
- null
  - *undefined가 가져다주는 혼란함을 피하기 위한 데이터 타입*
  - type이 object *(js의 자체버그)* 이므로 어떤 변수의 값이 null인지 여부를 판별하기 위해서 *일치연산자* *(===)* 를 이용하여 판별

  &nbsp;
# 정리
- *기본적으로 기본형은 불변값, 참조형은 가변값이다.*  
- ***변수**는 변경 가능한 데이터가 담길 수 있는 공간이고 **식별자**는 그 변수의 이름을 뜻한다.*  
- *변수를 선언하면 우선 메모리의 빈 공간에 식별자가 저장되고 그 공간에 자동으로 *undefined*가 할당된다. 이후 그 변수에 기본형 데이터를 할당하면 별도의 공간에 데이터를 저장하고, 그 공간의 주소를 변수의 값 영역에 할당한다.*  
- *참조형 데이터를 할당할 때, 참조형 데이터 내부 프로퍼티들을 위한 변수 영역을 별도로 확보한다. 확보된 주소를 변수에 연결하고 앞서 확보한 변수 영역에 각 프로퍼티의 식별자를 저장한 후 각 데이터를 별도 공간에 저장해서 그 주소를 식별자와 매칭시킨다.*
- *참조형 데이터를 불변값으로 사용하기 위해서는 깊은 복사를 이용하면 된다.*
- *'없음'을 나타내는 두가지 값 undefined 와 null에서 , 본래의 의미에 따라 없음을 표현하기 위해 명시적으로 undefined를 대입하는 것은 지양하는 것이 좋다*
